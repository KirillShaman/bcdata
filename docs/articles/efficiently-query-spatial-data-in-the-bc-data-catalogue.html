<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Querying Spatial Data with bcdata • bcdata</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Querying Spatial Data with bcdata">
<meta property="og:description" content="">
<meta property="og:image" content="https://bcgov.github.io/bcdata/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bcdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bcdata.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/efficiently-query-spatial-data-in-the-bc-data-catalogue.html">Querying Spatial Data with bcdata</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bcgov/bcdata">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Querying Spatial Data with bcdata</h1>
            
            <h4 class="date">2019-12-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bcgov/bcdata/blob/master/vignettes/efficiently-query-spatial-data-in-the-bc-data-catalogue.Rmd"><code>vignettes/efficiently-query-spatial-data-in-the-bc-data-catalogue.Rmd</code></a></small>
      <div class="hidden name"><code>efficiently-query-spatial-data-in-the-bc-data-catalogue.Rmd</code></div>

    </div>

    
    
<!--
Copyright 2019 Province of British Columbia

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
-->
<p>This vignette illustrates how to use <code><a href="../reference/bcdc_query_geodata.html">bcdata::bcdc_query_geodata</a></code> to request and query <a href="https://www2.gov.bc.ca/gov/content?id=95D78D544B244F34B89223EF069DF74E">Web Service-enabled</a> geospatial data from the B.C. Data Catalogue. To illustrate, we will request and merge two spatial datasets from the catalogue—school district and greenspaces spatial data—and then examine the amount of park space contained within the boundaries of the Greater Victoria, Prince George and Kamloops/Thompson British Columbia school districts.</p>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h2>
<p>First you need to load the package. We will also load the <code>sf</code> and <code>dplyr</code> packages to help us work with spatial data. You can learn more about the <code>sf</code> package <a href="https://r-spatial.github.io/sf/">here</a> and <code>dplyr</code> <a href="https://dplyr.tidyverse.org/">here</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bcdata)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>()</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#&gt; [1] "C:/_dev/GitHub_repos/bcdata/vignettes"</span></span></code></pre></div>
</div>
<div id="geospatial-data-in-the-b-c--data-catalogue" class="section level2">
<h2 class="hasAnchor">
<a href="#geospatial-data-in-the-b-c--data-catalogue" class="anchor"></a>Geospatial Data in the B.C. Data Catalogue</h2>
<p>The <a href="https://catalogue.data.gov.bc.ca/dataset">B.C. Data Catalogue</a> provides many datasets with spatial information through a <a href="https://www2.gov.bc.ca/gov/content?id=95D78D544B244F34B89223EF069DF74E">Web Service</a>. Technically speaking, this means if we have an internet connection we can issue <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a> requests to the catalogue and seamlessly import the response data into R as an <code>sf</code> objects. The <code>bcdata</code> package provides a means to a) choose which layer you want and b) use <code>dplyr</code> verbs to specifically tailor your request. A <code>dbplyr</code> backend is implemented so that requests are executed lazily meaning results are not transferred over the web until the user specifically calls the <code>collect</code> function. This approach mimics the <code>dplyr</code> verb translation to <code>SQL</code> seen for many database types. A good introduction to principles of <code>dbplyr</code> is available <a href="https://cran.r-project.org/package=dbplyr/vignettes/dbplyr.html">here</a>.</p>
</div>
<div id="school-district-data" class="section level2">
<h2 class="hasAnchor">
<a href="#school-district-data" class="anchor"></a>School District Data</h2>
<p>Our first step is to extract the <a href="https://catalog.data.gov.bc.ca/dataset/78ec5279-4534-49a1-97e8-9d315936f08b">school district polygons</a> from the B.C. Data Catalogue. This layer is described using this command:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="../reference/bcdc_get_record.html">bcdc_get_record</a></span>(<span class="st">"78ec5279-4534-49a1-97e8-9d315936f08b"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">#&gt; B.C. Data Catalogue Record: School Districts of BC </span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt; </span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; Name: school-districts-of-bc (ID: 78ec5279-4534-49a1-97e8-9d315936f08b )</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; Permalink: https://catalogue.data.gov.bc.ca/dataset/78ec5279-4534-49a1-97e8-9d315936f08b</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; Sector: Education</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; Licence: Open Government Licence - British Columbia</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; Type: Geographic</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; Last Updated: 2019-09-05 </span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; </span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co">#&gt; Description: The School Districts dataset contains the spatial representation (polygon) of the</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt; current extent of the administrative areas defined under section 176(1) of the</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt; School Act for the purposes of preservation and promotion of the fundamental</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt; principle of local autonomy and control of public education at the public and</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt; governmental levels through locally elected school boards. </span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt; </span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt; Resources: ( 3 )</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt; # A tibble: 3 x 8</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt;   name                     url                                                              id                    format ext   package_id               location        bcdata_available</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">#&gt;   &lt;chr&gt;                    &lt;chr&gt;                                                            &lt;chr&gt;                 &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;                    &lt;chr&gt;           &lt;lgl&gt;           </span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">#&gt; 1 BC Geographic Warehouse… https://catalogue.data.gov.bc.ca/api/ofi/other/WHSE_TANTALIS.TA… 529507c4-d155-4c4d-a… other  ""    78ec5279-4534-49a1-97e8… bcgeographicwa… FALSE           </span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">#&gt; 2 WMS getCapabilities req… https://openmaps.gov.bc.ca/geo/pub/WHSE_TANTALIS.TA_SCHOOL_DIST… 57d8843b-5278-4a0f-b… wms    ""    78ec5279-4534-49a1-97e8… bcgeographicwa… TRUE            </span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">#&gt; 3 KML Network Link         http://openmaps.gov.bc.ca/kml/geo/layers/WHSE_TANTALIS.TA_SCHOO… 7493e749-0e16-440c-9… kml    kml   78ec5279-4534-49a1-97e8… bcgeographicwa… FALSE</span></span></code></pre></div>
<p>This data is the boundary of each school district. The key information in this metadata is that the layer is a <code>**WFS request (Spatial Data)**</code>—which means it is available through a <a href="https://www2.gov.bc.ca/gov/content?id=95D78D544B244F34B89223EF069DF74E">Web Service</a>. From this we know we can make use of <code>bcdc_query_geodata</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"78ec5279-4534-49a1-97e8-9d315936f08b"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#&gt; Querying 'school-districts-of-bc' record</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">#&gt; &lt;U+25CF&gt; Using collect() on this object will return 59 features and 9 fields</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">#&gt; &lt;U+25CF&gt; At most six rows of the record are printed here</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="co">#&gt; Simple feature collection with 6 features and 9 fields</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt; geometry type:  POLYGON</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt; bbox:           xmin: 1480584 ymin: 475225.2 xmax: 1870586 ymax: 862609.6</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt; epsg (SRID):    3005</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt; proj4string:    +proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt; # A tibble: 6 x 10</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">#&gt;   id                 ADMIN_AREA_SID SCHOOL_DISTRICT_… SCHOOL_DISTRICT_… FEATURE_CODE FEATURE_AREA_SQM FEATURE_LENGTH_M OBJECTID SE_ANNO_CAD_DATA                                geometry</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt;   &lt;chr&gt;                       &lt;int&gt; &lt;chr&gt;                         &lt;int&gt; &lt;chr&gt;                   &lt;dbl&gt;            &lt;dbl&gt;    &lt;int&gt; &lt;chr&gt;                                      &lt;POLYGON [m]&gt;</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co">#&gt; 1 WHSE_TANTALIS.TA_…            121 Southeast Kooten…                 5 FA91800600       12518364168.          729285.        1 &lt;NA&gt;             ((1777342 674389.7, 1777324 674398.8, …</span></span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; 2 WHSE_TANTALIS.TA_…            122 Rocky Mountain                    6 FA91800600       28672897783.         1410275.        2 &lt;NA&gt;             ((1542332 861060.3, 1542312 861062.6, …</span></span>
<span id="cb3-17"><a href="#cb3-17"></a><span class="co">#&gt; 3 WHSE_TANTALIS.TA_…            123 Kootenay Lake                     8 FA91800600       15148870602.         1025248.        3 &lt;NA&gt;             ((1605026 706122.4, 1605024 706116.2, …</span></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co">#&gt; 4 WHSE_TANTALIS.TA_…            124 Arrow Lakes                      10 FA91800600        7391752941.          617156.        4 &lt;NA&gt;             ((1600141 682325.2, 1599877 682298.8, …</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co">#&gt; 5 WHSE_TANTALIS.TA_…            125 Revelstoke                       19 FA91800600        9320096494.          667611.        5 &lt;NA&gt;             ((1541172 678950.9, 1541191 678882.1, …</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co">#&gt; 6 WHSE_TANTALIS.TA_…            126 Kootenay-Columbia                20 FA91800600        3074361162.          338055.        6 &lt;NA&gt;             ((1552779 562929.4, 1552798 562926.6, …</span></span></code></pre></div>
<p>This is the initial query to the data in the catalogue. What has been returned is <em>not</em> the actual data but rather a subset to help you tune your query. The printed output of this query offers several useful pieces of information. Because we have queried with a unique ID, we are shown the name of the record. We also receive instruction that using <code><a href="../reference/collect.html">collect()</a></code> will retrieve a given number of features and fields present for this query. Lastly, there is a reminder that what is printed is only the first 6 rows of the record. Since we are limiting the scope of analysis to the Greater Victoria, Prince George and Kamloops/Thompson school districts, we want to ask the catalogue for only those polygons just like we would in a typical <code>dplyr</code> workflow:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"78ec5279-4534-49a1-97e8-9d315936f08b"</span>) <span class="op">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(SCHOOL_DISTRICT_NAME <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Greater Victoria"</span>, <span class="st">"Prince George"</span>,<span class="st">"Kamloops/Thompson"</span>))</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; Querying 'school-districts-of-bc' record</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co">#&gt; &lt;U+25CF&gt; Using collect() on this object will return 3 features and 9 fields</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co">#&gt; &lt;U+25CF&gt; At most six rows of the record are printed here</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="co">#&gt; Simple feature collection with 3 features and 9 fields</span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt; bbox:           xmin: 1126991 ymin: 379215.8 xmax: 1528154 ymax: 1224041</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt; epsg (SRID):    3005</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; proj4string:    +proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt; # A tibble: 3 x 10</span></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co">#&gt;   id                  ADMIN_AREA_SID SCHOOL_DISTRICT_… SCHOOL_DISTRICT_… FEATURE_CODE FEATURE_AREA_SQM FEATURE_LENGTH_M OBJECTID SE_ANNO_CAD_DATA                               geometry</span></span>
<span id="cb4-15"><a href="#cb4-15"></a><span class="co">#&gt;   &lt;chr&gt;                        &lt;int&gt; &lt;chr&gt;                         &lt;int&gt; &lt;chr&gt;                   &lt;dbl&gt;            &lt;dbl&gt;    &lt;int&gt; &lt;chr&gt;                                &lt;MULTIPOLYGON [m]&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16"></a><span class="co">#&gt; 1 WHSE_TANTALIS.TA_S…            133 Prince George                    57 FA91800600       52156022749.         2170693.       13 &lt;NA&gt;             (((1139512 1219856, 1139379 1219892, …</span></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">#&gt; 2 WHSE_TANTALIS.TA_S…            157 Greater Victoria                 61 FA91800600         112290667.          162930.       37 &lt;NA&gt;             (((1188094 392987.8, 1187514 392967.3…</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co">#&gt; 3 WHSE_TANTALIS.TA_S…            167 Kamloops/Thompson                73 FA91800600       26181564963.         1202467.       47 &lt;NA&gt;             (((1393261 890465.4, 1393261 890465.4…</span></span></code></pre></div>
<p>To further tune our query, we can also request only the columns we want. Really we only want the school district column and the spatial information. During an actual analysis, it is possible that you may need to initially collect more data than you want to determine value to subset by. For example, there is currently no way to ask the catalogue for all possible unique values of <code>SCHOOL_DISTRICT_NAME</code>. Is that case the data will need to be brought into R and unique values will need to be determined there.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"78ec5279-4534-49a1-97e8-9d315936f08b"</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(SCHOOL_DISTRICT_NAME <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Greater Victoria"</span>, <span class="st">"Prince George"</span>,<span class="st">"Kamloops/Thompson"</span>)) <span class="op">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">  </span><span class="kw"><a href="../reference/select.html">select</a></span>(SCHOOL_DISTRICT_NAME)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; Querying 'school-districts-of-bc' record</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; &lt;U+25CF&gt; Using collect() on this object will return 3 features and 5 fields</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; &lt;U+25CF&gt; At most six rows of the record are printed here</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="co">#&gt; Simple feature collection with 3 features and 5 fields</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co">#&gt; bbox:           xmin: 1126991 ymin: 379215.8 xmax: 1528154 ymax: 1224041</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co">#&gt; epsg (SRID):    3005</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="co">#&gt; proj4string:    +proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">#&gt; # A tibble: 3 x 6</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">#&gt;   id                                                ADMIN_AREA_SID SCHOOL_DISTRICT_NA… SCHOOL_DISTRICT_NUM… OBJECTID                                                            geometry</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">#&gt;   &lt;chr&gt;                                                      &lt;int&gt; &lt;chr&gt;                              &lt;int&gt;    &lt;int&gt;                                                  &lt;MULTIPOLYGON [m]&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">#&gt; 1 WHSE_TANTALIS.TA_SCHOOL_DISTRICTS_SVW.fid--50d1d…            133 Prince George                         57       13 (((1139512 1219856, 1139379 1219892, 1139246 1219944, 1139138 1220…</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="co">#&gt; 2 WHSE_TANTALIS.TA_SCHOOL_DISTRICTS_SVW.fid--50d1d…            157 Greater Victoria                      61       37 (((1188094 392987.8, 1187514 392967.3, 1186934 392946.8, 1186950 3…</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="co">#&gt; 3 WHSE_TANTALIS.TA_SCHOOL_DISTRICTS_SVW.fid--50d1d…            167 Kamloops/Thompson                     73       47 (((1393261 890465.4, 1393261 890465.4, 1393222 890468.5, 1393222 8…</span></span></code></pre></div>
<p>Note that in the <code>select</code> statement, we did not explicitly ask for the spatial data and also that there are several columns present that we didn’t select. This is because within each dataset in the data catalogue, there are several columns that will always be returned regardless of what is selected. If you really don’t want those columns after you <code>collect</code> the data, which we will take care of right now, you can drop them:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>districts &lt;-<span class="st"> </span><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"78ec5279-4534-49a1-97e8-9d315936f08b"</span>) <span class="op">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(SCHOOL_DISTRICT_NAME <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Greater Victoria"</span>, <span class="st">"Prince George"</span>,<span class="st">"Kamloops/Thompson"</span>)) <span class="op">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="st">  </span><span class="kw"><a href="../reference/select.html">select</a></span>(SCHOOL_DISTRICT_NAME) <span class="op">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">  </span><span class="kw"><a href="../reference/collect.html">collect</a></span>()</span></code></pre></div>
<p>Again note here that we have assigned the object a name and added the <code>collect</code> statement. This step happens when you have selected the data you want and wish to begin working with it in R like a normal <code>sf</code> object. For example, we can now plot these three school districts:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw"><a href="https://rdrr.io/pkg/sf/man/plot.html">plot</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_geometry</a></span>(districts))</span></code></pre></div>
<div class="figure">
<img src="vignette-fig-districts-1.png" alt=""><p class="caption">plot of chunk districts</p>
</div>
<p>Now that we have the spatial boundaries narrowed by specific school districts we can perform some spatial operations to determine parks in the school districts.</p>
</div>
<div id="greenspaces-data" class="section level2">
<h2 class="hasAnchor">
<a href="#greenspaces-data" class="anchor"></a>Greenspaces Data</h2>
<p>For the purposes of this example, let’s consider <a href="https://catalogue.data.gov.bc.ca/dataset/6a2fea1b-0cc4-4fc2-8017-eaf755d516da">this greenspace</a> layer in the catalogue. This layer is described here:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="../reference/bcdc_get_record.html">bcdc_get_record</a></span>(<span class="st">"6a2fea1b-0cc4-4fc2-8017-eaf755d516da"</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co">#&gt; B.C. Data Catalogue Record: Local and Regional Greenspaces </span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt; </span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt; Name: local-and-regional-greenspaces (ID: 6a2fea1b-0cc4-4fc2-8017-eaf755d516da )</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt; Permalink: https://catalogue.data.gov.bc.ca/dataset/6a2fea1b-0cc4-4fc2-8017-eaf755d516da</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt; Sector: Natural Resources</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt; Licence: Open Government Licence - British Columbia</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt; Type: Geographic</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt; Last Updated: 2019-09-05 </span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt; </span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt; Description: This dataset contains spatial and attribute information for local and regional</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt; greenspaces in British Columbia. Local and regional greenspaces are municipal or</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt; regional district lands designated by local government agencies and managed for</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#&gt; public enjoyment, ecosystem or wildlife values. Spatial boundaries were sourced from</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt; municipal and regional district web sites, which in some cases provide datasets</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt; under Open Government Licence, and in other cases, publicize parks and greenspaces</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt; on web maps or pdf maps. Boundaries were edge-matched to the ParcelMap BC cadastre.</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt; This spatial layer contains multipart polygons. </span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">#&gt; </span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co">#&gt; Resources: ( 4 )</span></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="co">#&gt; # A tibble: 4 x 8</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="co">#&gt;   name                 url                                                                          id                 format ext   package_id            location      bcdata_available</span></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="co">#&gt;   &lt;chr&gt;                &lt;chr&gt;                                                                        &lt;chr&gt;              &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;                 &lt;chr&gt;         &lt;lgl&gt;           </span></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="co">#&gt; 1 BC Geographic Wareh… https://catalogue.data.gov.bc.ca/api/ofi/other/WHSE_BASEMAPPING.GBA_LOCAL_R… dac89711-ebf4-46a… other  ""    6a2fea1b-0cc4-4fc2-8… bcgwdatastore FALSE           </span></span>
<span id="cb8-25"><a href="#cb8-25"></a><span class="co">#&gt; 2 WMS getCapabilities… https://openmaps.gov.bc.ca/geo/pub/WHSE_BASEMAPPING.GBA_LOCAL_REG_GREENSPAC… a8d5b53e-2ecf-434… wms    ""    6a2fea1b-0cc4-4fc2-8… bcgeographic… TRUE            </span></span>
<span id="cb8-26"><a href="#cb8-26"></a><span class="co">#&gt; 3 KML Network Link     http://openmaps.gov.bc.ca/kml/geo/layers/WHSE_BASEMAPPING.GBA_LOCAL_REG_GRE… a7454e41-017b-42c… kml    kml   6a2fea1b-0cc4-4fc2-8… bcgeographic… FALSE           </span></span>
<span id="cb8-27"><a href="#cb8-27"></a><span class="co">#&gt; 4 LocalRegionalParksA… https://catalogue.data.gov.bc.ca/dataset/6a2fea1b-0cc4-4fc2-8017-eaf755d516… 76663191-43b6-4a1… xlsx   xlsx  6a2fea1b-0cc4-4fc2-8… external      TRUE</span></span></code></pre></div>
<p>Again we recognize this is <a href="https://www2.gov.bc.ca/gov/content?id=95D78D544B244F34B89223EF069DF74E">Web Service-enabled</a> geospatial data, which means we can make use of <code>bcdc_query_geodata</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"6a2fea1b-0cc4-4fc2-8017-eaf755d516da"</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co">#&gt; Querying 'local-and-regional-greenspaces' record</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co">#&gt; &lt;U+25CF&gt; Using collect() on this object will return 8707 features and 19 fields</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="co">#&gt; &lt;U+25CF&gt; At most six rows of the record are printed here</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="co">#&gt; Simple feature collection with 6 features and 19 fields</span></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb9-8"><a href="#cb9-8"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co">#&gt; bbox:           xmin: 1227676 ymin: 451802.2 xmax: 1236544 ymax: 467135.4</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="co">#&gt; epsg (SRID):    3005</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="co">#&gt; proj4string:    +proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="co">#&gt; # A tibble: 6 x 20</span></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#&gt;   id    LOCAL_REG_GREEN… PARK_NAME PARK_TYPE PARK_PRIMARY_USE REGIONAL_DISTRI… MUNICIPALITY CIVIC_NUMBER CIVIC_NUMBER_SU… STREET_NAME LATITUDE LONGITUDE WHEN_UPDATED WEBSITE_URL</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;      </span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="co">#&gt; 1 WHSE…               19 55F - Gr… Local     Green Space      Metro Vancouver  Surrey               7634 &lt;NA&gt;             164 St          49.1     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb9-16"><a href="#cb9-16"></a><span class="co">#&gt; 2 WHSE…               20 50B - Ut… Local     Park             Metro Vancouver  Surrey              12586 &lt;NA&gt;             80 Ave          49.1     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co">#&gt; 3 WHSE…               21 Bear Cre… Local     Park             Metro Vancouver  Surrey              13750 &lt;NA&gt;             88 Ave          49.2     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb9-18"><a href="#cb9-18"></a><span class="co">#&gt; 4 WHSE…               22 Beaver C… Local     Park             Metro Vancouver  Surrey               6722 &lt;NA&gt;             122A St         49.1     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb9-19"><a href="#cb9-19"></a><span class="co">#&gt; 5 WHSE…               23 Bel-Air … Local     Park             Metro Vancouver  Surrey               9314 &lt;NA&gt;             157 St          49.2     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="co">#&gt; 6 WHSE…               24 Bell Est… Local     Park             Metro Vancouver  Surrey               1884 &lt;NA&gt;             137A St         49.0     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb9-21"><a href="#cb9-21"></a><span class="co">#&gt; # … with 6 more variables: LICENCE_COMMENTS &lt;chr&gt;, FEATURE_AREA_SQM &lt;dbl&gt;, FEATURE_LENGTH_M &lt;dbl&gt;, OBJECTID &lt;int&gt;, SE_ANNO_CAD_DATA &lt;chr&gt;, geometry &lt;MULTIPOLYGON [m]&gt;</span></span></code></pre></div>
<p>Since we are interested in only “Park” data we can subset our query:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"6a2fea1b-0cc4-4fc2-8017-eaf755d516da"</span>) <span class="op">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(PARK_PRIMARY_USE <span class="op">==</span><span class="st"> "Park"</span>)</span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co">#&gt; Querying 'local-and-regional-greenspaces' record</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co">#&gt; &lt;U+25CF&gt; Using collect() on this object will return 4373 features and 19 fields</span></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co">#&gt; &lt;U+25CF&gt; At most six rows of the record are printed here</span></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">#&gt; Simple feature collection with 6 features and 19 fields</span></span>
<span id="cb10-8"><a href="#cb10-8"></a><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="co">#&gt; bbox:           xmin: 1227676 ymin: 451450.3 xmax: 1234629 ymax: 467135.4</span></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">#&gt; epsg (SRID):    3005</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">#&gt; proj4string:    +proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#&gt; # A tibble: 6 x 20</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#&gt;   id    LOCAL_REG_GREEN… PARK_NAME PARK_TYPE PARK_PRIMARY_USE REGIONAL_DISTRI… MUNICIPALITY CIVIC_NUMBER CIVIC_NUMBER_SU… STREET_NAME LATITUDE LONGITUDE WHEN_UPDATED WEBSITE_URL</span></span>
<span id="cb10-15"><a href="#cb10-15"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;      </span></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">#&gt; 1 WHSE…               20 50B - Ut… Local     Park             Metro Vancouver  Surrey              12586 &lt;NA&gt;             80 Ave          49.1     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb10-17"><a href="#cb10-17"></a><span class="co">#&gt; 2 WHSE…               21 Bear Cre… Local     Park             Metro Vancouver  Surrey              13750 &lt;NA&gt;             88 Ave          49.2     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb10-18"><a href="#cb10-18"></a><span class="co">#&gt; 3 WHSE…               22 Beaver C… Local     Park             Metro Vancouver  Surrey               6722 &lt;NA&gt;             122A St         49.1     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb10-19"><a href="#cb10-19"></a><span class="co">#&gt; 4 WHSE…               23 Bel-Air … Local     Park             Metro Vancouver  Surrey               9314 &lt;NA&gt;             157 St          49.2     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb10-20"><a href="#cb10-20"></a><span class="co">#&gt; 5 WHSE…               24 Bell Est… Local     Park             Metro Vancouver  Surrey               1884 &lt;NA&gt;             137A St         49.0     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb10-21"><a href="#cb10-21"></a><span class="co">#&gt; 6 WHSE…               25 Bell Park Local     Park             Metro Vancouver  Surrey               1782 &lt;NA&gt;             136 St          49.0     -123. 2017-05-15Z  http://www…</span></span>
<span id="cb10-22"><a href="#cb10-22"></a><span class="co">#&gt; # … with 6 more variables: LICENCE_COMMENTS &lt;chr&gt;, FEATURE_AREA_SQM &lt;dbl&gt;, FEATURE_LENGTH_M &lt;dbl&gt;, OBJECTID &lt;int&gt;, SE_ANNO_CAD_DATA &lt;chr&gt;, geometry &lt;MULTIPOLYGON [m]&gt;</span></span></code></pre></div>
<p>Here we see that this greatly reduces the number of features that we are dealing with (and correspondingly the amount of data that needs to be transferred over the web). Remember also that we still have not actually requested the full dataset. This is just still a preview. Also this query still includes all municipal parks in BC while we only want the ones in the three school districts - the polygons defined by the <code>districts</code> object. To find that subset of parks we can make use of the built-in geometric operators which allow us to perform spatial operations remotely fine tuning our query even further. Here using the <code>INTERSECTS</code> function is appropriate and since this is a last tuning step, we can call <code>collect</code> and assign a name to this object. These requests can sometimes take quite a long:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>districts_parks &lt;-<span class="st"> </span><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"6a2fea1b-0cc4-4fc2-8017-eaf755d516da"</span>) <span class="op">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(PARK_PRIMARY_USE <span class="op">==</span><span class="st"> "Park"</span>) <span class="op">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(<span class="kw"><a href="../reference/cql_geom_predicates.html">INTERSECTS</a></span>(districts)) <span class="op">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="st">  </span><span class="kw"><a href="../reference/collect.html">collect</a></span>()</span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="co">#&gt; Warning: The object is too large to perform exact spatial operations using bcdata.</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co">#&gt;              To simplify the polygon, a bounding box was drawn around the polygon and all</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="co">#&gt;              features within the box will be returned. Options include further processing</span></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">#&gt;              with on the returned object or simplify the object.</span></span></code></pre></div>
<p>Plotting both the filtered parks data and the district polygons reveals an important consideration when using <code>bcdata</code>:</p>
<div class="figure">
<img src="vignette-fig-district_parks-1.png" alt=""><p class="caption">plot of chunk district_parks</p>
</div>
<p>In this example, many parks not contained within the school districts are included in the <code>districts_parks</code> object. This is because rather than a full intersection, <code>bcdata</code> draws a bounding box around all the polygons that are doing the intersection (in this case <code>district</code>) and does the intersection based on that bounding box. This is a limitation imposed by the size of the object doing the geometric operation (in this case <code>district</code>) and the limits of the BC Data Catalogue. Drawing the bounding box illustrates this point:</p>
<div class="figure">
<img src="vignette-fig-bbox-1.png" alt=""><p class="caption">plot of chunk bbox</p>
</div>
<p>We are left with two options to get around this problem. First, we can simply do some additional processing with the <code>sf</code> package. Specifically we can use a spatial join to assign parks into their respective district:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>districts_parks_join &lt;-<span class="st"> </span>districts_parks <span class="op">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_join.html">st_join</a></span>(districts, <span class="dt">left =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="figure">
<img src="vignette-fig-dp_join-1.png" alt=""><p class="caption">plot of chunk dp_join</p>
</div>
<p>A second approach is to set an internal option (<code>bcdata.max_geom_pred_size</code>) and increase the threshold of when a bounding box is drawn. Options are set in R like this:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="st">"bcdata.max_geom_pred_size"</span> =<span class="st"> </span>{object size <span class="cf">in</span> bytes})</span></code></pre></div>
<p>The value of <code>bcdata.max_geom_pred_size</code> is set conservatively so that requests to the Web Service are more consistently successful. Increasing this value may result in invalid requests.</p>
<p>Finally, to address our original question of which school district has the most municipal park space we can calculate the area of each park polygon and then sum those areas by school district:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>districts_parks_join <span class="op">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="st">  </span><span class="kw"><a href="../reference/mutate.html">mutate</a></span>(<span class="dt">area =</span> <span class="kw"><a href="https://rdrr.io/pkg/sf/man/geos_measures.html">st_area</a></span>(geometry)) <span class="op">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_geometry.html">st_set_geometry</a></span>(<span class="ot">NULL</span>) <span class="op">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(SCHOOL_DISTRICT_NAME) <span class="op">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="st">  </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/tidyverse.html">summarise</a></span>(<span class="dt">total_area =</span> <span class="kw"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(area)) <span class="op">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(total_area)</span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co">#&gt; # A tibble: 3 x 2</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co">#&gt;   SCHOOL_DISTRICT_NAME total_area</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="co">#&gt;   &lt;chr&gt;                     [m^2]</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="co">#&gt; 1 Kamloops/Thompson       3982629</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="co">#&gt; 2 Prince George          12254343</span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co">#&gt; 3 Greater Victoria       25587503</span></span></code></pre></div>
</div>
<div id="additional-useful-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-useful-functions" class="anchor"></a>Additional Useful Functions</h2>
<p>There are a couple of other functions in <code>bcdata</code> that are useful to know when working with spatial data from the catalogue. <code>bcdc_describe_feature</code> gives the column names, whether the column is selectable, and the column types in both R and on the remote server:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw"><a href="../reference/bcdc_describe_feature.html">bcdc_describe_feature</a></span>(<span class="st">"6a2fea1b-0cc4-4fc2-8017-eaf755d516da"</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="co">#&gt; # A tibble: 20 x 4</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="co">#&gt;    col_name                selectable remote_col_type          local_col_type</span></span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="co">#&gt;    &lt;chr&gt;                   &lt;lgl&gt;      &lt;chr&gt;                    &lt;chr&gt;         </span></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co">#&gt;  1 id                      FALSE      xsd:string               character     </span></span>
<span id="cb15-6"><a href="#cb15-6"></a><span class="co">#&gt;  2 LOCAL_REG_GREENSPACE_ID FALSE      xsd:decimal              numeric       </span></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="co">#&gt;  3 PARK_NAME               TRUE       xsd:string               character     </span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co">#&gt;  4 PARK_TYPE               TRUE       xsd:string               character     </span></span>
<span id="cb15-9"><a href="#cb15-9"></a><span class="co">#&gt;  5 PARK_PRIMARY_USE        TRUE       xsd:string               character     </span></span>
<span id="cb15-10"><a href="#cb15-10"></a><span class="co">#&gt;  6 REGIONAL_DISTRICT       TRUE       xsd:string               character     </span></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="co">#&gt;  7 MUNICIPALITY            TRUE       xsd:string               character     </span></span>
<span id="cb15-12"><a href="#cb15-12"></a><span class="co">#&gt;  8 CIVIC_NUMBER            TRUE       xsd:decimal              numeric       </span></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#&gt;  9 CIVIC_NUMBER_SUFFIX     TRUE       xsd:string               character     </span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#&gt; 10 STREET_NAME             TRUE       xsd:string               character     </span></span>
<span id="cb15-15"><a href="#cb15-15"></a><span class="co">#&gt; 11 LATITUDE                TRUE       xsd:decimal              numeric       </span></span>
<span id="cb15-16"><a href="#cb15-16"></a><span class="co">#&gt; 12 LONGITUDE               TRUE       xsd:decimal              numeric       </span></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co">#&gt; 13 WHEN_UPDATED            TRUE       xsd:date                 date          </span></span>
<span id="cb15-18"><a href="#cb15-18"></a><span class="co">#&gt; 14 WEBSITE_URL             TRUE       xsd:string               character     </span></span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="co">#&gt; 15 LICENCE_COMMENTS        TRUE       xsd:string               character     </span></span>
<span id="cb15-20"><a href="#cb15-20"></a><span class="co">#&gt; 16 FEATURE_AREA_SQM        TRUE       xsd:decimal              numeric       </span></span>
<span id="cb15-21"><a href="#cb15-21"></a><span class="co">#&gt; 17 FEATURE_LENGTH_M        TRUE       xsd:decimal              numeric       </span></span>
<span id="cb15-22"><a href="#cb15-22"></a><span class="co">#&gt; 18 SHAPE                   TRUE       gml:GeometryPropertyType sfc geometry  </span></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co">#&gt; 19 OBJECTID                FALSE      xsd:decimal              numeric       </span></span>
<span id="cb15-24"><a href="#cb15-24"></a><span class="co">#&gt; 20 SE_ANNO_CAD_DATA        TRUE       xsd:hexBinary            numeric</span></span></code></pre></div>
<p>This is a helpful initial step to learn column names and types when you construct your query.</p>
<p>Another useful function is <code><a href="../reference/show_query.html">show_query()</a></code> which provides information on the request issued to the remote server:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"6a2fea1b-0cc4-4fc2-8017-eaf755d516da"</span>) <span class="op">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(PARK_PRIMARY_USE <span class="op">==</span><span class="st"> "Park"</span>) <span class="op">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(<span class="kw"><a href="../reference/cql_geom_predicates.html">INTERSECTS</a></span>(districts)) <span class="op">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="st">  </span><span class="kw"><a href="../reference/show_query.html">show_query</a></span>()</span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="co">#&gt; Warning: The object is too large to perform exact spatial operations using bcdata.</span></span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="co">#&gt;              To simplify the polygon, a bounding box was drawn around the polygon and all</span></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">#&gt;              features within the box will be returned. Options include further processing</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="co">#&gt;              with on the returned object or simplify the object.</span></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co">#&gt; &lt;url&gt;</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co">#&gt; &lt;body&gt;</span></span>
<span id="cb16-11"><a href="#cb16-11"></a><span class="co">#&gt;    SERVICE: WFS</span></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co">#&gt;    VERSION: 2.0.0</span></span>
<span id="cb16-13"><a href="#cb16-13"></a><span class="co">#&gt;    REQUEST: GetFeature</span></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="co">#&gt;    outputFormat: application/json</span></span>
<span id="cb16-15"><a href="#cb16-15"></a><span class="co">#&gt;    typeNames: WHSE_BASEMAPPING.GBA_LOCAL_REG_GREENSPACES_SP</span></span>
<span id="cb16-16"><a href="#cb16-16"></a><span class="co">#&gt;    SRSNAME: EPSG:3005</span></span>
<span id="cb16-17"><a href="#cb16-17"></a><span class="co">#&gt;    CQL_FILTER: (("PARK_PRIMARY_USE" = 'Park') AND (INTERSECTS(SHAPE, POLYGON ((1126991 379215.8, 1528155 379215.8, 1528155 1224041, 1126991 1224041, 1126991 379215.8)))))</span></span>
<span id="cb16-18"><a href="#cb16-18"></a><span class="co">#&gt; </span></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="co">#&gt; &lt;full query url&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20"></a><span class="co">#&gt; https://openmaps.gov.bc.ca/geo/pub/wfs?SERVICE=WFS&amp;VERSION=2.0.0&amp;REQUEST=GetFeature&amp;outputFormat=application%2Fjson&amp;typeNames=WHSE_BASEMAPPING.GBA_LOCAL_REG_GREENSPACES_SP&amp;SRSNAME=EPSG%3A3005&amp;CQL_FILTER=%28%28%22PARK_PRIMARY_USE%22%20%3D%20%27Park%27%29%20AND%20%28INTERSECTS%28SHAPE%2C%20POLYGON%20%28%281126991%20379215.8%2C%201528155%20379215.8%2C%201528155%201224041%2C%201126991%201224041%2C%201126991%20379215.8%29%29%29%29%29</span></span></code></pre></div>
<p>This output is what being created by the dplyr code outlined above.</p>
</div>
<div id="using-b-c--geographic-warehouse-bcgw-layer-names" class="section level2">
<h2 class="hasAnchor">
<a href="#using-b-c--geographic-warehouse-bcgw-layer-names" class="anchor"></a>Using B.C. Geographic Warehouse (BCGW) layer names</h2>
<p>If you are familiar with the <a href="https://www2.gov.bc.ca/gov/content/data/geographic-data-services/bc-spatial-data-infrastructure/bc-geographic-warehouse">B.C. Geographic Warehouse (BCGW)</a>, you may already know the name of a layer that you want from the BCGW. <code><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata()</a></code> (as well as all other related functions) supports supplying that name directly. For example, the <a href="https://catalogue.data.gov.bc.ca/dataset/bc-airports#object-description">record for the B.C. airports layer</a> shows that the object name is <code>WHSE_IMAGERY_AND_BASE_MAPS.GSR_AIRPORTS_SVW</code>, and we can use that in <code><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Look at the columns available:</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw"><a href="../reference/bcdc_describe_feature.html">bcdc_describe_feature</a></span>(<span class="st">"WHSE_IMAGERY_AND_BASE_MAPS.GSR_AIRPORTS_SVW"</span>)</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="co">#&gt; # A tibble: 42 x 4</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="co">#&gt;    col_name                      selectable remote_col_type local_col_type</span></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#&gt;    &lt;chr&gt;                         &lt;lgl&gt;      &lt;chr&gt;           &lt;chr&gt;         </span></span>
<span id="cb17-6"><a href="#cb17-6"></a><span class="co">#&gt;  1 id                            FALSE      xsd:string      character     </span></span>
<span id="cb17-7"><a href="#cb17-7"></a><span class="co">#&gt;  2 CUSTODIAN_ORG_DESCRIPTION     FALSE      xsd:string      character     </span></span>
<span id="cb17-8"><a href="#cb17-8"></a><span class="co">#&gt;  3 BUSINESS_CATEGORY_CLASS       FALSE      xsd:string      character     </span></span>
<span id="cb17-9"><a href="#cb17-9"></a><span class="co">#&gt;  4 BUSINESS_CATEGORY_DESCRIPTION FALSE      xsd:string      character     </span></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co">#&gt;  5 OCCUPANT_TYPE_DESCRIPTION     FALSE      xsd:string      character     </span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="co">#&gt;  6 SOURCE_DATA_ID                FALSE      xsd:string      character     </span></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="co">#&gt;  7 SUPPLIED_SOURCE_ID_IND        FALSE      xsd:string      character     </span></span>
<span id="cb17-13"><a href="#cb17-13"></a><span class="co">#&gt;  8 AIRPORT_NAME                  FALSE      xsd:string      character     </span></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="co">#&gt;  9 DESCRIPTION                   TRUE       xsd:string      character     </span></span>
<span id="cb17-15"><a href="#cb17-15"></a><span class="co">#&gt; 10 PHYSICAL_ADDRESS              TRUE       xsd:string      character     </span></span>
<span id="cb17-16"><a href="#cb17-16"></a><span class="co">#&gt; # … with 32 more rows</span></span>
<span id="cb17-17"><a href="#cb17-17"></a></span>
<span id="cb17-18"><a href="#cb17-18"></a><span class="co"># Query the data with bcdc_query_geodata and filter + select:</span></span>
<span id="cb17-19"><a href="#cb17-19"></a><span class="kw"><a href="../reference/bcdc_query_geodata.html">bcdc_query_geodata</a></span>(<span class="st">"WHSE_IMAGERY_AND_BASE_MAPS.GSR_AIRPORTS_SVW"</span>) <span class="op">%&gt;%</span></span>
<span id="cb17-20"><a href="#cb17-20"></a><span class="st">  </span><span class="kw"><a href="../reference/filter.html">filter</a></span>(DESCRIPTION <span class="op">==</span><span class="st"> "airport"</span>) <span class="op">%&gt;%</span></span>
<span id="cb17-21"><a href="#cb17-21"></a><span class="st">  </span><span class="kw"><a href="../reference/select.html">select</a></span>(AIRPORT_NAME, LOCALITY, NUMBER_OF_RUNWAYS)</span>
<span id="cb17-22"><a href="#cb17-22"></a><span class="co">#&gt; Querying 'WHSE_IMAGERY_AND_BASE_MAPS.GSR_AIRPORTS_SVW' record</span></span>
<span id="cb17-23"><a href="#cb17-23"></a><span class="co">#&gt; &lt;U+25CF&gt; Using collect() on this object will return 37 features and 13 fields</span></span>
<span id="cb17-24"><a href="#cb17-24"></a><span class="co">#&gt; &lt;U+25CF&gt; At most six rows of the record are printed here</span></span>
<span id="cb17-25"><a href="#cb17-25"></a><span class="co">#&gt; --------------------------------------------------------------------------------</span></span>
<span id="cb17-26"><a href="#cb17-26"></a><span class="co">#&gt; Simple feature collection with 6 features and 13 fields</span></span>
<span id="cb17-27"><a href="#cb17-27"></a><span class="co">#&gt; geometry type:  POINT</span></span>
<span id="cb17-28"><a href="#cb17-28"></a><span class="co">#&gt; dimension:      XY</span></span>
<span id="cb17-29"><a href="#cb17-29"></a><span class="co">#&gt; bbox:           xmin: 833323.9 ymin: 406886.6 xmax: 1266385 ymax: 1054950</span></span>
<span id="cb17-30"><a href="#cb17-30"></a><span class="co">#&gt; epsg (SRID):    3005</span></span>
<span id="cb17-31"><a href="#cb17-31"></a><span class="co">#&gt; proj4string:    +proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs</span></span>
<span id="cb17-32"><a href="#cb17-32"></a><span class="co">#&gt; # A tibble: 6 x 14</span></span>
<span id="cb17-33"><a href="#cb17-33"></a><span class="co">#&gt;   id    CUSTODIAN_ORG_D… BUSINESS_CATEGO… BUSINESS_CATEGO… OCCUPANT_TYPE_D… SOURCE_DATA_ID SUPPLIED_SOURCE… AIRPORT_NAME LOCALITY LATITUDE LONGITUDE NUMBER_OF_RUNWA… SEQUENCE_ID</span></span>
<span id="cb17-34"><a href="#cb17-34"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;            &lt;int&gt;       &lt;int&gt;</span></span>
<span id="cb17-35"><a href="#cb17-35"></a><span class="co">#&gt; 1 WHSE… "Ministry of Fo… airTransportati… Air Transportat… BC Airports      455            N                Terrace (No… Terrace      54.5     -129.                2         577</span></span>
<span id="cb17-36"><a href="#cb17-36"></a><span class="co">#&gt; 2 WHSE… "Ministry of Fo… airTransportati… Air Transportat… BC Airports      464            N                Victoria In… North S…     48.6     -123.                3         733</span></span>
<span id="cb17-37"><a href="#cb17-37"></a><span class="co">#&gt; 3 WHSE… "Ministry of Fo… airTransportati… Air Transportat… BC Airports      482            N                Nanaimo Air… Nanaimo      49.1     -124.                1         853</span></span>
<span id="cb17-38"><a href="#cb17-38"></a><span class="co">#&gt; 4 WHSE… "Ministry of Fo… airTransportati… Air Transportat… BC Airports      483            N                Tofino/Long… Tofino       49.1     -126.                3         641</span></span>
<span id="cb17-39"><a href="#cb17-39"></a><span class="co">#&gt; 5 WHSE… "Ministry of Fo… airTransportati… Air Transportat… BC Airports      484            N                Abbotsford … Abbotsf…     49.0     -122.                2        1039</span></span>
<span id="cb17-40"><a href="#cb17-40"></a><span class="co">#&gt; 6 WHSE… "Ministry of Fo… airTransportati… Air Transportat… BC Airports      487            N                Boundary Ba… Delta        49.1     -123.                2         827</span></span>
<span id="cb17-41"><a href="#cb17-41"></a><span class="co">#&gt; # … with 1 more variable: geometry &lt;POINT [m]&gt;</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting Started</a></li>
      <li><a href="#geospatial-data-in-the-b-c--data-catalogue">Geospatial Data in the B.C. Data Catalogue</a></li>
      <li><a href="#school-district-data">School District Data</a></li>
      <li><a href="#greenspaces-data">Greenspaces Data</a></li>
      <li><a href="#additional-useful-functions">Additional Useful Functions</a></li>
      <li><a href="#using-b-c--geographic-warehouse-bcgw-layer-names">Using B.C. Geographic Warehouse (BCGW) layer names</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andy Teucher, Sam Albers, Stephanie Hazlitt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
